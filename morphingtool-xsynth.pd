#N canvas 733 172 450 300 12;
#X obj 96 621 outlet~;
#X obj 41 107 *~, f 6;
#X obj 41 198 rfft~, f 11;
#X obj 96 531 rifft~, f 10;
#X obj 198 38 inlet~, f 7;
#X obj 41 163 /~, f 6;
#X obj 41 38 inlet~, f 7;
#N canvas 0 0 450 250 (subpatch) 0;
#X array w\$0 1024 float 2;
#X coords 0 1 1024 -1 200 140 1;
#X restore 476 1263 graph;
#X obj 284 1167 until;
#X obj 284 1315 avg;
#X obj 284 1204 f;
#X obj 325 1204 + 1;
#X obj 258 1129 t b f b;
#X obj 258 1357 f;
#X msg 214 1167 clear;
#X obj 284 1278 *;
#X obj 325 1167 0;
#X obj 199 107 *~, f 6;
#X obj 199 163 /~, f 6;
#X obj 41 785 loadbang, f 10;
#X msg 128 785 bang;
#X text 476 1190 Hann window sounds the best so far., f 27;
#X text 214 1037 Calculate the normalization coefficient., f 27;
#X msg 476 1129 hanning;
#X obj 96 586 *~, f 6;
#X obj 41 1091 t f f f f, f 96;
#X msg 74 1000 set \$1 \$2;
#X obj 74 969 pack;
#X obj 44 817 b;
#X obj 346 969 f;
#X obj 258 1394 expr $f1*$f2*$f3;
#X obj 87 889 t f f;
#X obj 87 863 4;
#X obj 63 78 tabreceive~ w\$0;
#X obj 221 78 tabreceive~ w\$0;
#X obj 118 558 tabreceive~ w\$0;
#X obj 476 1170 else/tabgen w\$0;
#X obj 284 1241 tabread w\$0;
#X obj 718 1160 \$0;
#X obj 41 1562 until;
#X obj 41 1599 f;
#X obj 82 1599 + 1;
#X obj 82 1562 0;
#X obj 98 1649 moses, f 9;
#X obj 41 1516 t f b, f 15;
#N canvas 0 0 450 250 (subpatch) 0;
#X array b\$0 512 float 2;
#X coords 0 1 512 -1 200 140 1;
#X restore 476 1437 graph;
#X obj 137 1675 moses, f 9;
#X obj 41 1854 array set b\$0;
#X text 41 1877 Calculate the bandpass shape., f 27;
#X obj 101 1766 b;
#X obj 179 1766 b;
#X obj 98 1792 0;
#X obj 199 198 rfft~, f 11;
#X obj 96 439 *~;
#X obj 151 439 *~;
#X text 349 246 Vector with phase of v2 and magnitude of v1 is equal to v2/|v2|*|v1|, f 28;
#X text 349 191 This is still just the replacement of the phase \, but without slow atan2() inside car2pol~ this time, f 28;
#X obj 96 496 *~;
#X obj 151 496 *~;
#X obj 204 439 tabreceive~ b\$0;
#X obj 41 863 \$1;
#X obj 137 1562 \$2;
#X obj 215 1562 \$3;
#X obj 103 107 r n\$0;
#X obj 261 107 r n\$0;
#X obj 258 1431 s n\$0;
#X obj 394 38 inlet;
#X obj 123 350 xfade.mc~;
#X obj 41 350 xfade.mc~;
#X obj 453 38 inlet;
#X obj 41 1117 / 2;
#X msg 694 1226 \; w\$2 resize \$1 \; b\$2 resize \$3;
#X obj 694 1129 t f b f, f 12;
#X obj 757 1160 / 2;
#X obj 694 1193 pack f f f;
#X text 140 858 Window size (from argument) and overlap, f 27;
#X text 41 642 See https://ccrma.stanford.edu/~jos/sasp/Cross_Synthesis.html;
#N canvas 0 50 450 300 mag-norm 0;
#X obj 209 116 inlet~;
#X obj 194 178 *~;
#X obj 152 116 inlet~;
#X obj 152 216 +~;
#X obj 152 251 sqrt~;
#X obj 152 377 outlet~;
#X obj 152 177 *~;
#X obj 21 307 /~;
#X obj 76 307 /~;
#X obj 21 376 outlet~;
#X obj 76 376 outlet~;
#X connect 0 0 1 1;
#X connect 0 0 1 0;
#X connect 0 0 8 0;
#X connect 1 0 3 1;
#X connect 2 0 6 0;
#X connect 2 0 6 1;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 7 1;
#X connect 4 0 8 1;
#X connect 6 0 3 0;
#X connect 7 0 9 0;
#X connect 8 0 10 0;
#X restore 41 229 pd mag-norm;
#N canvas 0 50 450 300 mag-norm 0;
#X obj 209 116 inlet~;
#X obj 194 178 *~;
#X obj 152 116 inlet~;
#X obj 152 216 +~;
#X obj 152 251 sqrt~;
#X obj 152 377 outlet~;
#X obj 152 177 *~;
#X obj 21 307 /~;
#X obj 76 307 /~;
#X obj 21 376 outlet~;
#X obj 76 376 outlet~;
#X connect 0 0 1 1;
#X connect 0 0 1 0;
#X connect 0 0 8 0;
#X connect 1 0 3 1;
#X connect 2 0 6 0;
#X connect 2 0 6 1;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 7 1;
#X connect 4 0 8 1;
#X connect 6 0 3 0;
#X connect 7 0 9 0;
#X connect 8 0 10 0;
#X restore 199 229 pd mag-norm;
#X obj 199 394 xfade.mc~;
#X obj 74 1034 switch~;
#X obj 581 38 inlet;
#X obj 581 64 s e\$0;
#X obj 158 1000 r e\$0;
#X text 349 347 Interpolation between phases is interpolation between unit vectors., f 28;
#X obj 140 1766 b;
#X obj 176 1792 1;
#X obj 176 1701 moses, f 9;
#X obj 215 1727 moses, f 9;
#X obj 255 1599 + 1;
#X obj 257 1766 b;
#X obj 218 1766 b;
#X obj 254 1792 0;
#X obj 176 1599 + 1;
#X obj 137 1792 0;
#X obj 215 1792 0.5;
#X connect 1 0 5 0;
#X connect 2 0 77 0;
#X connect 2 1 77 1;
#X connect 3 0 24 0;
#X connect 4 0 17 0;
#X connect 5 0 2 0;
#X connect 6 0 1 0;
#X connect 8 0 10 0;
#X connect 9 0 13 1;
#X connect 10 0 11 0;
#X connect 10 0 37 0;
#X connect 11 0 10 1;
#X connect 12 0 13 0;
#X connect 12 1 8 0;
#X connect 12 2 14 0;
#X connect 12 2 16 0;
#X connect 13 0 30 0;
#X connect 14 0 9 0;
#X connect 15 0 9 0;
#X connect 16 0 10 1;
#X connect 17 0 18 0;
#X connect 18 0 52 0;
#X connect 19 0 28 0;
#X connect 20 0 28 0;
#X connect 23 0 36 0;
#X connect 24 0 0 0;
#X connect 25 0 70 0;
#X connect 25 1 12 0;
#X connect 25 2 23 0;
#X connect 25 2 30 1;
#X connect 25 3 72 0;
#X connect 26 0 80 0;
#X connect 27 0 26 0;
#X connect 28 0 32 0;
#X connect 28 0 60 0;
#X connect 29 0 30 2;
#X connect 30 0 65 0;
#X connect 31 0 27 1;
#X connect 31 1 29 0;
#X connect 32 0 31 0;
#X connect 33 0 1 1;
#X connect 34 0 17 1;
#X connect 35 0 24 1;
#X connect 37 0 15 0;
#X connect 37 0 15 1;
#X connect 38 0 74 1;
#X connect 39 0 40 0;
#X connect 40 0 41 0;
#X connect 40 0 43 0;
#X connect 40 0 47 1;
#X connect 41 0 40 1;
#X connect 42 0 40 1;
#X connect 43 0 49 0;
#X connect 43 1 46 0;
#X connect 44 0 39 0;
#X connect 44 1 42 0;
#X connect 44 1 61 0;
#X connect 44 1 62 0;
#X connect 46 0 85 0;
#X connect 46 1 87 0;
#X connect 49 0 51 0;
#X connect 50 0 86 0;
#X connect 51 0 47 0;
#X connect 52 0 78 0;
#X connect 52 1 78 1;
#X connect 53 0 57 0;
#X connect 54 0 58 0;
#X connect 57 0 3 0;
#X connect 58 0 3 1;
#X connect 59 0 57 1;
#X connect 59 0 58 1;
#X connect 60 0 27 0;
#X connect 60 0 25 0;
#X connect 61 0 43 1;
#X connect 61 0 93 0;
#X connect 62 0 87 1;
#X connect 62 0 89 0;
#X connect 63 0 5 1;
#X connect 64 0 18 1;
#X connect 66 0 68 2;
#X connect 66 0 67 2;
#X connect 67 0 54 0;
#X connect 68 0 53 0;
#X connect 69 0 79 2;
#X connect 70 0 44 0;
#X connect 72 0 74 0;
#X connect 72 1 38 0;
#X connect 72 2 73 0;
#X connect 73 0 74 2;
#X connect 74 0 71 0;
#X connect 77 0 68 0;
#X connect 77 1 67 0;
#X connect 77 2 79 1;
#X connect 78 0 68 1;
#X connect 78 1 67 1;
#X connect 78 2 79 0;
#X connect 79 0 54 1;
#X connect 79 0 53 1;
#X connect 81 0 82 0;
#X connect 83 0 80 0;
#X connect 83 0 20 0;
#X connect 85 0 94 0;
#X connect 86 0 47 0;
#X connect 87 0 50 0;
#X connect 87 1 88 0;
#X connect 88 0 91 0;
#X connect 88 1 90 0;
#X connect 89 0 88 1;
#X connect 90 0 92 0;
#X connect 91 0 95 0;
#X connect 92 0 47 0;
#X connect 93 0 46 1;
#X connect 94 0 47 0;
#X connect 95 0 47 0;
